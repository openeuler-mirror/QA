![openEuler ico](../../images/openEuler.png)

版权所有 © 2024 openEuler社区  
您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA
4.0”)的约束。为了方便用户理解，您可以通过访问<https://creativecommons.org/licenses/by-sa/4.0/>了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA
4.0的完整协议内容您可以访问如下网址获取：<https://creativecommons.org/licenses/by-sa/4.0/legalcode>。

 修订记录

| 日期 | 修订版本     | 修改描述  | 作者 |
| ---- | ----------- | -------- | ---- |
| 2024-11-18 |  1.0.0    |  初稿     | 林孟孟 |

关键词：RPM 国密 验签

摘要：RPM进行操作系统软件包管理，需要支持国密算法，以实现软件包国密完整性签名/验签，满足标准要求。

缩略语清单：
| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |

# 特性描述
<!-- 主要介绍特性实现的背景、功能以及作用 -->
背景：openEuler采用RPM进行操作系统软件包管理，需要支持国密算法，以实现软件包国密完整性签名/验签，满足标准要求。

## 需求清单
|no|feature|status|sig|owner|发布方式|涉及软件包列表|
|:----|:---|:---|:--|:----|:----|:----|
|[IB3ZG8](https://gitee.com/openeuler/release-management/issues/IB3ZG8?from=project-issue)| 【openEuler 24.03-LTS-SP1 】RPM国密签名支持 | Developing | sig-security-facility | @zhujianwei001 | rpm，libgcrypt，gnupg2  |  |



# 特性分层策略
## 总体测试策略
<!-- 主要描述特性的整体测试策略，主要开展哪些测试(接口/功能/场景/专项) -->

- 测试目标：测试异常参数解析&异常配置文件接口功能，验证gpg支持生成国密公私钥，gpg支持生成国密证书，gpg支持国密签名和验签，rpm支持国密算法签名和验签，资料测试等。
- 时间进度：待评估
- 风险评估：NA
- 重点事项：验证rpm验签
- 争议事项：NA

## 特性测试约束
<!-- 主要描述特性测试的约束条件 -->

NA

## 接口测试
<!-- 主要描述接口级测试策略及测试设计思路 -->

| 接口描述 | 设计思路 | 测试重点 | 备注 |
| ------- | ------- | ------- | ---- |
| 异常参数解析 | 空、字符串内带空格/tab/换行/,/;/*等特殊符号、大小写、参数文件路径不存在、权限不对、超规格  | 验证异常参数解析正常  | NA  |
| 异常配置文件 | 超大文件、空文件、部分/全为注释  | 验证接口解析正常  | NA  |

## 功能测试
<!-- 主要描述特性提供的功能的测试策略及测试思路 -->

| 功能描述 | 设计思路 | 测试重点 | 备注 |
| ------- | ------- | ------- | ---- |
| gpg支持生成国密公私钥 |  gpg --quick-generate-key <密钥标识> sm2p256v1 |  成功生成SM2密钥对    |      |
| gpg支持生成国密证书 |  gpg --full-generate-key --expert（交互） |    成功生成SM2自签名证书  |     |
| gpg支持国密签名和验签 | gpg --sign 对数据进行签名； gpg --verify 对数据进行验签 |   签名成功，验签成功   |     |
| rpm支持国密算法签名和验签 |  rpmsign --addsign <RPM文件>，对任意rpm进行签名；rpm -Kv <RPM文件>，验证rpm签名；安装rpm |  签名成功，验签成功     |     |
| 对原有签名模式无影响 |   rsa&ecdsa|  签名成功，验签成功     |     |

## 场景测试
<!-- 主要描述对特性使用的主要场景的测试策略及测试思路 -->

参考功能场景

## 专项测试
<!-- 主要描述其他专项测试,如安全测试 稳定性测试 性能测试 兼容性测试等 -->

| 专项测试类型 | 专项测试描述 | 测试预期结果 | 备注 |
| ----------- | ----------- | ----------- | ---- |
| 可靠性测试 | rpm验签时，使用错误的密钥对 | 签名成功，验签成功    |      |
| 资料 | 验证资料描述 | 资料描述准确    |      |

# 特性测试环境描述
<!-- 主要描述执行测试的硬件信息 -->
不涉及特殊硬件

| 硬件型号 | 硬件配置信息 | 备注 |
| -------- | ------------ | ---- |

# 特性测试执行策略

## 测试计划
<!-- 测试执行策略主要描述该轮次执行的分层策略中的测试项 -->

| Stange name   | Begin time | End time   | Days | 测试执行策略                   | 备注   |
| :------------ | :--------- | :--------- | ---- | ----------------------------- | ------ |
|     round2       |  2024/11/22        |2024/11/28       |     12|                    全量测试           |        |
|     round3-round4         |   2024/11/28         |  2024/12/12         |7      |   回归测试+长稳测试                            |        |

# 入口标准  
1.特性满足质量标准，达成需求设计要求目标

# 出口标准  
1.策略规划的测试活动涉及测试用例100%执行完毕  
2.版本无严重问题遗留，其他问题有规避措施

# 附件
