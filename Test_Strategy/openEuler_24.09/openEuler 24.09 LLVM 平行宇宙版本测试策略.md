![openEuler ico](../../images/openEuler.png)

版权所有 © 2024 openEuler社区  
您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA
4.0”)的约束。为了方便用户理解，您可以通过访问<https://creativecommons.org/licenses/by-sa/4.0/>了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA
4.0的完整协议内容您可以访问如下网址获取：<https://creativecommons.org/licenses/by-sa/4.0/legalcode>。

修订记录

| 日期     | 修订版本 | 修改  章节 | 修改描述 | 作者              |
| -------- | -------- | ---------- | -------- | ----------------- |
| 2024-7-10 | 1.0.0    |            | 初稿     | jchzhou |


目 录

1 概述 

>   1.1 版本背景

>   1.2 需求范围

2 风险

3 测试分层策略

4 测试分析设计策略

>   4.1 新增feature测试设计策略

>   4.2 继承feature/组件测试设计策略

>   4.3 专项测试策略

5 测试执行策略

6 附件

**Keywords 关键词**：

openEuler 创新版本 LLVM 平行宇宙 Preview 版本 RISC-V 测试策略

Abstract 摘要：

本文是 openEuler LLVM 平行宇宙计划 24.09 Preview 版本的整体测试策略，用于指导该版本后续测试活动的开展

缩略语清单：

| 缩略语 | 英文全名                             | 中文解释       |
| ------ | ------------------------------------ | -------------- |
| OS     | Operation System                     | 操作系统       |
| CVE    | Common Vulnerabilities and Exposures | 公共漏洞和暴露 |

# 概述

openEuler 是一款开源操作系统。当前 openEuler 内核源于 Linux，支持鲲鹏及其它多种处理器，能够充分释放计算芯片的潜能，是由全球开源贡献者构建的高效、稳定、安全的开源操作系统，适用于数据库、大数据、云计算、人工智能等应用场景。

openEuler 平行宇宙计划是 openEuler 社区的一个探索性项目，始于社区演进提案 oEEP 003，尝试使用 LLVM 编译器套件替换 GCC 套件构建 Linux 发行版与其组成部分的软件包。

本文主要描述 openEuler LLVM 平行宇宙计划 24.09 Preview 版本的总体测试策略，按照社区开发模式进行运作，结合社区 release-management 团队制定的 24.09 社区大版本计划及 LLVM 平行宇宙计划推动者们制定的发版计划规划相应的测试活动。整体测试策略覆盖新需求、继承需求的测试分析和执行，明确各个测试周期的测试策略及出入口标准，指导后续测试活动。

## 版本背景

openEuler LLVM 平行宇宙计划 24.09 Preview 版本是基于 6.6 内核的平行 Preview 版本，面向 RISC-V 架构，面向服务器、云场景，持续提供更多新特性和功能扩展，给开发者和用户带来全新的体验，服务更多的领域和更多的用户。该版本基于社区 24.09 分支，发布范围相较 openEuler LLVM 平行宇宙计划 24.03 Preview 版本主要变动：

1. 软件版本选型升级，详情请见[24.09 社区大版本变更说明]()
2. 发版范围由 BaseOS 范围扩张至 Everything
3. 切换使用 LLVM 构建的软件包范围增加

## 需求范围

openEuler LLVM 平行宇宙计划 RISC-V 架构首个 Everything 版本。

openEuler LLVM 平行宇宙计划 24.09 Preview 版本交付[需求列表](h)如下：（*待 24.09 社区大版本测试策略发布后进行刷新*）

| no                                                           | feature                                  | status     | sig                      | owner                                                        | 发布方式 | 涉及软件包列表                                               |
| :----------------------------------------------------------- | :--------------------------------------- | :--------- | :----------------------- | :----------------------------------------------------------- | :------- | :----------------------------------------------------------- |
| [待补充](https://gitee.com/openeuler/release-management/issues/I7RPQG?from=project-issue) | 继承特性回合                             | Developing | 相关sig组                | [Sig-Release-Maintainers](https://gitee.com/sujinling)                    | ISO      | https://gitee.com/openeuler/release-management/blob/master/openEuler-24.09/openEuler-24.09%E5%85%B3%E9%94%AE%E7%BB%A7%E6%89%BF%E7%89%B9%E6%80%A7%E6%B8%85%E5%8D%95.md |
| [待补充](https://gitee.com/openeuler/release-management/issues/I7RPOW?from=project-issue) | 软件包升级适配                           | Developing | 相关sig组                | [Sig-Release-Maintainers](https://gitee.com/sujinling)                    | ISO      | https://gitee.com/openeuler/release-management/blob/master/openEuler-24.09/openEuler-24.09%20%E5%8D%87%E7%BA%A7%E9%80%89%E5%9E%8B.md |                                           |


# 风险

| 问题类型 | 问题描述 | 问题等级 | 应对措施 | 责任人 | 状态 |
| -------- | -------- | -------- | -------- | ------ | ---- |
|          |          |          |          |        |      |

# 测试分层策略

本次24.09 创新版本的具体测试分层策略如下：

| 序号 | feature                     | 开发主体-sig                 | 测试主体-sig                 | 测试分层策略                                                 |
| ---- | --------------------------- | ---------------------------- | ---------------------------- | ------------------------------------------------------------ |
| 1 | 平行宇宙计划 - 操作系统基础底座 (BaseOS)     | openEuler 平行宇宙计划 | openEuler 平行宇宙计划    | 继承已有测试能力，通过 mugen 自动化测试对发布范围内所有软件包进行验证；使用开源测试套对内核、编译器等重要系统组件的基本功能进行验证    |
| 2 | 平行宇宙计划 - 操作系统全量软件包 (Everything)     | openEuler 平行宇宙计划 | openEuler 平行宇宙计划    | 继承已有测试能力，通过 mugen 自动化测试对发布范围内所有软件包进行验证；使用开源测试套对内核、编译器等重要系统组件的基本功能进行验证    |


# 测试分析设计策略

## 新增feature测试设计策略

| feature                     | 策略                                                         |
| --------------------------- | ------------------------------------------------------------ |
平行宇宙计划 - 操作系统全量软件包 (Everything)     | 通过 mugen 自动化测试对发布范围内所有软件包进行验证；使用开源测试套对内核、编译器等重要系统组件的基本功能进行验证    |

## 继承feature/组件测试设计策略

从历史版本继承的功能特性的测试策略如下：

| feature                     | 策略                                                         |
| --------------------------- | ------------------------------------------------------------ |
| 平行宇宙计划 - 操作系统基础底座 (BaseOS) | 继承已有测试能力，通过 mugen 自动化测试对发布范围内所有软件包进行验证；使用开源测试套对内核、编译器等重要系统组件的基本功能进行验证    |

## 专项测试策略

### 安全测试

[openEuler 24.09 安全测试策略]()

openEuler作为社区开源版本，在系统整体安全上需要进行保证，以发现系统中存在的安全脆弱性与风险，为版本的安全提供切实的依据，推动产品完成安全问题整改，提高产品的安全。主要测试项目如下表所示：

| 测试类         | 描述                                                 | 具体测试内容                                                 |
| :------------- | ---------------------------------------------------- | ------------------------------------------------------------ |
| 安全扫描类     | 病毒/开源漏洞/安全编译选项/敏感信息/代码片段引用扫描 | 通过工具进行相应的扫描，扫描结果采用增量的方式进行分析；编译选项和敏感信息需要针对新开源特性及新增软件包进行； |
| 安全配置管理类 | Linux安全规范                                        | Linux安全规范包括：服务管理，账号密码管理、文件及用户权限管理、内核参数配置管理、日志管理等；需对openEuler版本进行上述安全配置测试； |
| 安全检查       | 开源合规license检查/签名和完整性校验/SBOM            | 检查软件包的license是否合规；对于发布件要求具备签名和完整性校验机制，如RPM需要具备GPG校验与签名；SBOM信息具备自动生成的能力，随软件发布件一起生成与发布 |
| 安全评估       | 通过openscap检测系统安全漏洞和合规性                 | 漏洞扫描：确定系统中的已知漏洞；合规性检查：验证系统配置是否符合特定的安全标准和政策 |

### 可靠性测试

可靠性是版本测试中需重点考虑的测试活动，在各类资源异常/抢占竞争/压力/故障等背景下，通过功能的并发、反复操作进行长时间的测试；过程中通过监控系统资源、进程运行等状态，及时发现系统/特性隐藏的问题。

可靠性的测试建议从关键特性、重要组件、新增特性的可靠性指标和系统级的可靠性进行分析和设计，已保证特性和系统在各类异常、故障及压力背景下的持续提供服务的能力。

| 测试类性     | 具体测试内容                                                 |
| ------------ | ------------------------------------------------------------ |
| 操作系统长稳 | 系统在各种压力背景下，通过构造资源类和服务类等异常，随机执行LTP、系统管理操作等测试；过程中关注系统重要进程/服务，日志等异常情况；建议稳定性测试时长7\*24 |

### 性能测试

性能测试是针对交付件的具体性能指标，利用工具进行各类性能指标的测试。性能数据波动需小于5%；特性类的性能，需要按照各个特性既定的指标，进行时间效率、资源消耗底噪等方面的测试验证，保证指标项与既定目标的一致。

| **指标大项** | **指标小项**                                                                               | **指标值**              | **说明**                          |
|--------------|--------------------------------------------------------------------------------------------|-------------------------|-----------------------------------|
| OS基础性能   | 进程调度子系统，内存管理子系统、进程通信子系统、系统调用、锁性能、文件子系统、网络子系统。 | 参考版本相应指标基线 | 与基线数据差异小于5%以内可接受 |

### 兼容性测试

#### 南向兼容性

南向兼容性测试分板卡测试和整机适配测试两个部分，RISC-V 架构当前南向兼容性测试只做整机适配的测试。

本版本作为 RISC-V 架构创新大版本的平行 Preview 版本，牵引达成以下清单的兼容性基线目标，使能目标硬件。主要使用社区硬件兼容性测试工具oec-hardware 进行测试，适配完成后将在社区发布此版本的兼容性清单。

| **整机厂商** | **整机型号** | **CPU型号**   | **测试主体**      |
| ------------ | ------------ | ------------- | ----------------- |
| 群芯闪耀科技  | Milk-V Pioneer Box | 算能算丰 SG2042 | openEuler 平行宇宙计划 |

#### 北向兼容性

创新大版本暂不涉及

#### 虚拟化兼容性

RISC-V 架构目前未有具备硬件虚拟化机能的设备上市，暂不涉及虚拟化相关兼容性测试

### 软件包管理专项测试

软件包(openEuler中特指RPM包)测试，基于历史24.03至今发现的质量问题总结。
* 软件版本变更检查：检查前序版本的代码变动是否在当前版本继承，保证代码不漏合。
* 多动态库检查：检查软件是否存在多个版本动态库（存在编译自依赖软件包升级方式不规范）

### 资料测试

资料测试主要是对版本交付的资料进行测试，重点是保证各个资料描述说明的清晰性和功能的正确性，另外openEuler作为一个开源社区，除提供中文的资料还有英文文档也需要重点测试。资料交付清单如下：

| **手册名称**       | **覆盖策略**                                | **中英文测试策略** | Arm（仅供参考） | X86 （仅供参考）| RISC-V |
|------------------|--------------------------------------------|------------------|------------------|------------------|------------------|
| DDE安装指南       | 安装步骤的准确性及DDE桌面系统是否能成功安装启动    | 英文描述的准确性   | √ | √ | √ |
| UKUI安装指南      | 安装步骤的准确性及UKUI桌面系统是否能成功安装启动   | 英文描述的准确性   | √ | √ | √ |
| KIRAN安装指南     | 安装步骤的准确性及Kiran桌面系统是否能成功安装启动  | 英文描述的准确性   | √ | √ | √ |
| XFCE安装指南      | 安装步骤的准确性及XFCE桌面系统是否能成功安装启动   | 英文描述的准确性   | √ | √ | √ |
| GNOME安装指南     | 安装步骤的准确性及GNOME桌面系统是否能成功安装启动  | 英文描述的准确性   | √ | √ | √ |
| 树莓派安装指导     | 树莓派镜像的安装方式及安装指导的准确性及树莓派镜像是否可以成功安装启动 | 英文描述的准确性   | √ | √ | × |
| 安装指南          | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | √ |
| 管理员指南         | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | √ |
| 安全加固指南       | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | × |
| 虚拟化用户指南     | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | × |
| StratoVirt用户指南 | 文档描述与版本的行为是否一致                   | 英文描述的准确性   | √ | √ | × |
| 容器用户指南       | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | × |
| 应用开发指南       | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | √ |
| 工具集用户指南     | 文档描述与版本的行为是否一致                    | 英文描述的准确性   | √ | √ | × |


# 测试执行策略

openEuler 24.09 版本按照社区release-manger团队既定的版本计划，共有5轮测试，按照社区研发模式，所有的需求都在拉分支前已完成合入，因此版本测试采取1+3+1的测试方式，即1轮基本功能保障发布beta版本可以提供给外部开发者，3轮全量保障本次版本发布所有特性(新增&继承)以及系统其他dfx能力，1轮回归，特性的合入不得晚于RC3。

### 测试计划

openEuler 24.09 平行宇宙 Preview 版本按照社区开发模式进行运作，结合社区 release-management 团队制定的 24.09 大版本计划及 LLVM 平行宇宙计划推动者们制定的发版计划规划相应的测试活动。

# Release Plan

| Stage Name                    | Begin Time | End Time  | Days | Note                                               |
| ----------------------------- | ---------- | --------- | ---- | -------------------------------------------------- |
| Collect key features          | 2024/6/3   | 2024/7/16 | 44   | 版本需求收集                                       |
| Change Review 1               | 2024/7/1  | 2024/7/12 | 25   | Review 软件包变更（升级/退役/淘汰）                |
| Herited features              | 2024/7/1  | 2024/7/22 | 23   | 继承特性合入（Branch前完成合入）  |
| Develop                       | 2024/7/1  | 2024/8/19 | 50   | 新特性开发，合入master |
| Kernel freezing               | 2024/7/16   | 2024/7/22 | 10   | 内核冻结                                           |
| Branch 24.09                  | 2024/7/22  | 2024/8/5 | 15 | master 拉取 24.09 分支           |
| Build & Alpha                 | 2024/8/6  | 2024/8/12  | 7    | 新开发特性合入，Alpha版本发布                      |
| Test round 1                  | 2024/8/13   | 2024/8/19  | 7   | 24.09 启动集成测试                             |
| Change Review 2               | 2024/8/13  | 2024/8/15 | 3    | 发起软件包淘汰评审                                 |
| Beta version release          | 2024/8/16  | 2024/8/19 | 4    | 24.09 Beta版本发布                             |
| Test round 2                  | 2024/8/20  | 2024/8/26 | 7    | 全量验证                                           |
| Change Review 3               | 2024/8/27  | 2024/8/29 | 3    | 分支启动冻结，只允许bug fix                        |
| Test round 3                  | 2024/8/29  | 2024/9/4  | 7    | 分支冻结，只允许bug fix                            |
| Test round 4                  | 2024/9/5   | 2024/9/11 | 7    | 回归测试                                           |
| Test round 5                  | 2024/9/12  | 2024/9/19 | 7    | 回归测试（跨中秋节，预祝中秋节快乐）                 |
| Release Review                | 2024/9/20  | 2024/9/22 | 3    | 版本发布决策/ Go or No Go                          |
| Release preparation           | 2024/9/23  | 2024/9/28 | 6    | 发布前准备阶段，发布件系统梳理                     |
| Release                       | 2024/9/29  | 2024/9/30 | 2    | 社区Release评审通过正式发布                        |



### 测试重点

测试阶段1：

1.  继承特性/新特性的基本功能

2.  交付重要组件(内核、虚拟化、容器、编译器等)的功能完整性

3.  系统集成方面保证多组件多模块集成的正确性和整体系统的完整性

4.  通过软件包管理测试，对LTS版本发布软件的可安装、卸载、升级、回退进行整体保证

5.  专项情况如下：

    性能：保证版本的性能满足发布基线标准，不能低于LTS版本性能指标

    安全测试：进行安全CVE漏洞、安全编译选项、敏感信息扫描

    南向兼容性验证

测试阶段2：

1.  继承特性/新特性的全量验证

2.  通过自动化覆盖重要组件的功能

3.  系统集成的正确性和完整性

4.  软件包管理测试

5.  专项：

    可靠性：保证版本的长时间稳定运行，建议运行时长7\*24
    
    软件包fuzz测试
    
    兼容性测试：南向硬件测试+北向软件测试

测试阶段3：

1.  继承特性/新特性的自动化全量验证

2.  系统集成验证

3.  软件包管理测试

4.  专项：性能、可靠性、文档测试、南北向兼容性测试

5.  问题单回归

测试阶段4：

1. 交付特性/组件的全量测试

2. 问题单回归

3. 软件包管理测试

4. 系统集成验证

5. 专项：安全CVE扫描、可靠性、性能、文档测试、南北向兼容性测试

测试阶段5：

1. 交付特性/组件的自动化全量测试

2. 系统集成自动化测试项执行

3. 问题单全量回归

4. 专项：交付件病毒扫描、文档测试

### 入口标准

1.  上个阶段无block问题遗留

2.  转测版本的冒烟无阻塞性问题

### 出口标准

1.  策略规划的测试活动涉及测试用例100%执行完毕

2.  发布特性/新需求/性能基线等满足版本规划目标

3.  版本无block问题遗留，其它严重问题要有相应规避措施或说明

# 附件

无