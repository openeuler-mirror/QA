![openEuler ico](../../images/openEuler.png)

版权所有 © 2024 openEuler社区  
您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA
4.0”)的约束。为了方便用户理解，您可以通过访问<https://creativecommons.org/licenses/by-sa/4.0/>了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA
4.0的完整协议内容您可以访问如下网址获取：<https://creativecommons.org/licenses/by-sa/4.0/legalcode>。

 修订记录

| 日期 | 修订版本     | 修改描述  | 作者 |
| ---- | ----------- | -------- | ---- |
| 2024-11-29 |  1.0.0    |  初稿     | linmengmeng |

关键词：sysboost mysql bolt

摘要：sysboost功能增强与配套oeaware插件实现启动阶段自动优化，本特性使用sysboost bolt优化mysqld二进制。

缩略语清单：
| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |

# 特性描述
<!-- 主要介绍特性实现的背景、功能以及作用 -->
背景：GCC结合sysboost实现无感知使能反馈优化，MySQL开箱性能提升15%以上，下游应用场景使用sysboost bolt优化mysqld二进制
功能：sysboost安装后默认不启动守护进程，通过sysboostd命令对二进制进行优化，优化后在原二进制同目录下生成优化后二进制xxx.tro，执行原二进制，会自动加载优化后的二进制。

## 需求清单
|no|feature|status|sig|owner|发布方式|涉及软件包列表|
|:----|:---|:---|:--|:----|:----|:----|
|[IB3ZL2](https://gitee.com/openeuler/release-management/issues/IB3ZL2?from=project-issue)| 【openEuler 22.03 SP4】GCC结合sysboost实现无感知使能反馈优化 | Discussion | sig-Compiler | @wangding16 | ISO  | sysboost |

## 风险项
<!-- 主要描述特性已知风险项 -->
- 暂无

# 特性分层策略
## 总体测试策略
<!-- 主要描述特性的整体测试策略，主要开展哪些测试(接口/功能/场景/专项) -->

- 测试目标：保证sysboost继承功能的基础上，重点测试可靠性和性能提升。
- 时间进度：预计12-05结束验证
- 风险评估：NA
- 重点事项：可靠性和性能提升验证
- 争议事项：NA

## 特性测试约束
<!-- 主要描述特性测试的约束条件 -->

不支持x86

## 接口测试
<!-- 主要描述接口级测试策略及测试设计思路 -->

| 接口描述 | 设计思路 | 测试重点 | 备注 |
| ------- | ------- | ------- | ---- |
| /usr/bin/sysboostd | 该接口用来生成优化后的二进制  | 测试接口功能和权限  | NA  |

## 功能测试
<!-- 主要描述特性提供的功能的测试策略及测试思路 -->

| 功能描述 | 设计思路 | 测试重点 | 备注 |
| ------- | ------- | ------- | ---- |
| sysboost优化后，可生成二进制的rto文件；停止sysboost优化后，回退rto文件 | 非法参数按预期拦截，合法参数按照预期返回，sysboost功能无异常 | 关注生成,回退文件的准确性  |      |
| sysboost优化后使用大页 | 检查优化后的大页使用情况 | 检查优化后行为符合预期  |      |
| 优化或者错误信息会记录日志 | 关注日志信息定位和调测准确性 | 关注日志完整和准确性  |      |


## 专项测试
<!-- 主要描述其他专项测试,如安全测试 稳定性测试 性能测试 兼容性测试等 -->

| 专项测试类型 | 专项测试描述 |  备注 |
| ----------- | ----------- |  ---- |
| 可靠性测试 | 二进制的rto文件被删除、或权限被修改，权限不足，自动切换到未优化的二进制 |  |
| 可靠性测试 | profile文件内容修改，读或写数据时会生成不同的profile |     |
| 可靠性测试 | 磁盘空间不足时，生成rto文件异常，清理空间后正常生成 |     |
| 可靠性测试 | 使用sysboostd生成二进制rto文件过程中，kill掉，重新执行可正常生成rto |     |
| 可靠性测试 | 进程crash后，会自动回退使用未优化的二进制 |     |
| 安全隐私测试 | sysboostd权限为500 |     |
| 性能测试 | 验证通过sysboost优化后，mysql性能提升15%以上 |  性能测试场景固定   |
| 资料测试 | 验证资料测试完整性 |     |


# 特性测试环境描述
<!-- 主要描述执行测试的硬件信息 -->

NA

# 特性测试执行策略

## 测试计划
<!-- 测试执行策略主要描述该轮次执行的分层策略中的测试项 -->

| Stange name   | Begin time | End time   | Days | 测试执行策略                   | 备注   |
| :------------ | :--------- | :--------- | ---- | ----------------------------- | ------ |
|     round2          |  2024/11/22         |2024/11/28       | 8    | 全量测试                               |        |
|     round3           |   2024/11/27         |  2024/12/05       |8      |   全量测试+回归测试                            |        |

# 入口标准
1.特性满足质量标准，达成需求设计要求目标

# 出口标准  
1.策略规划的测试活动涉及测试用例100%执行完毕  
2.版本无严重问题遗留，其他问题有规避措施

# 附件
