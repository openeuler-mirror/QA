![openEuler ico](../../images/openEuler.png)

版权所有 © 2023  openEuler社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录

| 日期        | 修订版本    | 修改描述               |     作者        |
| ---------- | ---------- | ---------------------- | -----------     |
| 2023/12/21 |   1.0.0    | 报告创建                |  qianchen       |

关键词：共线程模式 ipv6 vlan 网卡自愈 bond4/bond6
摘要：
本次需求包含共线程模式、vlan模式、bond模式、网卡自愈、ipv6等特性，按照测试策略，对新增特性进行功能、可靠性、性能测试，本报告对测试过程进行记录说明，给出测试评估与总结。 

# 1   特性概述
特性主要分为下面几个功能点：共线程模式，ipv6，vlan模式，网卡自愈，网卡io深度可配置。

本次主要测试在共线程模式下，配合bond模式和vlan模式进行业务测试，将网线插拔或者重启网口后业务能恢复。

# 2   特性测试信息
本节描述被测对象的版本信息和测试的时间及测试轮次区，详细的版本信息和测试时间如下表：

| 版本名称                          | 测试起始时间  | 测试结束时间  |  
| -------------------------------  | ----------- | ----------- |
| openEuler 22.03-LTS-SP3     |      2023-12-1     |       2023-12-8      |
| openEuler 22.03-LTS-SP3     |      2023-12-11    |       2023-12-15     |
| openEuler 22.03-LTS-SP3     |      2023-12-18    |       2023-12-22     |

描述特性测试的硬件环境信息

| 架构    | 环境   | 配置                                 | 数量 |
|:-------|:------|:--------------------------------------|:----:|
| x86架构 | 物理机 | CPU核数：48<br>内存：256G<br>网卡型号：mlx5（25G） | 2   |


# 3   测试结论
##  3.1 测试整体结论
执行新增特性用例22个，继承用例98个，覆盖特性的基本功能测试、可靠性测试、性能测试、长稳测试，发现9个有效问题。

| 测试活动    | 活动评价            |
| ----------| ---------------------- |
| 基本功能测试  | 对新增配置项进行正向、负向测试，及配置组合测试，符合特性要求  |
| 可靠性测试  | 在网卡down、丢ip、tc故障注入等异常情况下进行测试，结果符合要求  |
| 性能测试  |  在测试模型（bond4+共线程模式）下进行打流测试，性能测试结果符合要求  |
| 长稳测试  |  在测试模型（bond4+共线程模式）下进行长稳测试，结果符合要求  |

##  3.2 约束说明
NA

##  3.3 遗留问题分析
### 3.3.1 遗留问题影响以及规避措施
无遗留问题

### 3.3.2 问题统计
|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
|:-----:| :----: | :---: | :---: | :---: | :--: |
| 数目   |    11   |   0  |   2  |  9  |  0   |
| 百分比 |   100%  |  0  |  18% |  82%  |  0   |

# 4  详细测试结论
本特性重点测试openEuler 20.03-LTS-SP3版本下的共线程模式+vlan模式+bond4/bond6模式的功能和性能。

## 4.1.1 功能测试结论
| 序号 | 测试点 | 质量评估   | 备注
| ---- | ----- | ------ |------ |
| 1    | 共线程模式测试      |   ■   |  NA  |
| 2    | bond4/bond6模式测试 |  ■   |  NA  |
| 3    | ipv6测试           |   ■   |  NA  |
| 4    | vlan模式测试        |  ■   |  NA  |
| 5    | 网卡io深度可配置测试 |  ■   |  NA  |
| 6    | 网卡自愈测试        |   ■   |  NA  |

## 4.1.2 可靠性测试结论
| 序号 | 测试点 | 质量评估   | 备注
| -----| ----- | ------ |------ |
| 1    | 网卡down/up|   ■  |  NA  |
| 2    | 丢ip       |   ■  |  NA  |
| 3    | tc故障注入 |   ■   |  NA  |

## 4.1.3 性能测试结论
共线程模式、bond4模式下，客户端用户态、服务端内核态进行性能测试，iops达到100w，符合要求。

## 4.1.4 长稳测试结论
共线程模式、bond4模式下，客户端用户态、服务端内核态进行测试，时长超过2*24h时符合要求。

## 5  后续测试建议

NA

# 6  附件

NA