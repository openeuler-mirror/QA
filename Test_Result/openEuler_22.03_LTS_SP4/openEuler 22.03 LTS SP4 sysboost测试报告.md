![avatar](../../images/openEuler.png)


版权所有 © 2023  openEuler社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期 | 修订   版本 | 修改描述 | 作者 |
| ---- | ----------- | -------- | ---- |
| 2024/12/03 | v1.0 | sysboost测试报告 | 雷纪锋 |

关键词： sysboost

摘要：sysboost功能增强与配套oeaware插件实现启动阶段自动优化，提升应用性能，依据测试要求，对特性进行功能测试、场景测试、可靠性测试、性能测试。


# 1     特性概述

通过sysboostd对二进制进行优化，优化后在原二进制同目录下生成优化后二进制xxx.rto，执行原二进制时，会自动加载优化后的二进制，以提升应用性能

# 2     特性测试信息

| 版本名称 | 测试起始时间 | 测试结束时间 |
| -------- | ------------ | ------------ |
| openEuler 22.03 LTS SP4 | 2024/11/21 | 2024/12/04 |

描述特性测试的硬件环境信息
| 硬件型号 | 硬件配置信息 | 备注 |
| -------- | ------------ | ---- |
| TaiShan 2280 v2 | Kunpeng920-6426@2.6GHz *2 |  |

# 3     测试结论概述

## 3.1   测试整体结论

sysboost功能增强特性，共计执行了10个用例，主要覆盖了功能、可靠性、性能测试，重点关注可靠性测试。
经测试发现3个问题，均回归通过，整体质量良好。

| 测试活动 | 测试子项 |活动评价 |
| ------- | ------- |------- |
| 功能测试 | 针对sysboost优化后，生成二进制的rto文件，当执行原二进制时，会自动加载优化后的二进制；停止sysboost优化后，删除优化后的rto文件；sysboost优化后使用大页；优化或者错误信息会记录日志，分别记录在/etc/sysboost.d/.optimized.log、/etc/sysboost.d/.sysboost.err，均符合预期。 | 发现问题已解决，回归通过，无遗留风险 |
| 可靠性测试 | 二进制的rto文件被删除、或权限被修改（权限不足），自动切换到未优化的二进制；根据应用场景生成profile文件，例如读或写数据时会生成不同的profile；磁盘空间不足时，生成rto文件异常，清理空间后正常生成；使用sysboostd生成二进制rto文件过程中，kill掉，重新执行可正常生成rto；进程crash后，会自动回退使用未优化的二进制，均符合预期。 | 未发现问题，无遗留风险 |
| 性能测试 | 使用业界常用的评估数据库性能的开源工具Benchmarksql，测试优化前后mysql数据库的tpmC指标，优化后性能提升22%，符合预期 | 未发现问题，无遗留风险 |
| 安全测试 | /usr/bin/sysboostd接口权限为500 | 未发现问题，无遗留风险 |

## 3.2   约束说明

| 序号 | 约束说明 |
| --- | --- |
| 1 | 不支持x86架构 |
| 2 | 使用bolt优化需要增加-Wl,-q编译选项 |
| 3 | 使用大页需要大页对齐-zcommon-page-size=2097152 -zmax-page-size=2097152 |

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

无遗留问题

### 3.3.2 问题统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   | 3 |      | 1 | 2 |        |
| 百分比 | 100% |      | 33% | 66% |        |

| issue: |
| ------ |
| https://gitee.com/openeuler/sysboost/issues/IB7GVW?from=project-issue |
| https://gitee.com/openeuler/sysboost/issues/IB8BFN?from=project-issue |
| https://gitee.com/openeuler/sysboost/issues/IB8OYK?from=project-issue |

# 4 详细测试结论

## 4.1 功能测试

| 序号 | 组件/特性名称 | 特性质量评估 | 备注 |
| --- | ----------- | :--------: | --- |
| 1 | sysboost优化后，可生成二进制的rto文件，当执行原二进制时，会自动加载优化后的二进制；停止sysboost优化后，删除优化后的rto文件 | 测试通过 |
| 2 | sysboost优化后使用大页 | 测试通过 |
| 3 | 优化或者错误信息会记录日志，分别记录在/etc/sysboost.d/.optimized.log、/etc/sysboost.d/.sysboost.err | 测试通过 |

## 4.2 兼容性测试结论

不涉及

## 4.3 DFX专项测试结论

### 4.3.1 性能测试结论
测试方案：使用业界常用的评估数据库性能的开源工具Benchmarksql，测试优化前后mysql数据库的tpmC指标。
| 指标大项 | 指标小项 | 指标值 | 测试结论 |
| ------- | ------- | ------ | ------- |
| 性能 | mysql性能 | 优化后性能提升22% | 测试通过 |

### 4.3.2 可靠性/韧性测试结论

| 测试类型 | 测试内容 | 测试结论 |
| ------- | ------- | -------- |
| 可靠性 | 二进制的rto文件被删除、或权限被修改（权限不足），自动切换到未优化的二进制 | 测试通过 |
| 可靠性 | 根据应用场景生成profile文件，例如读或写数据时会生成不同的profile | 测试通过 |
| 可靠性 | 磁盘空间不足时，生成rto文件异常，清理空间后正常生成 | 测试通过 |
| 可靠性 | 使用sysboostd生成二进制rto文件过程中，kill掉，重新执行可正常生成rto | 测试通过 |
| 可靠性 | 进程crash后，会自动回退使用未优化的二进制 | 测试通过 |

### 4.3.3 安全测试结论

| 测试类型 | 测试内容 | 测试结论 |
| ------- | ------- | -------- |
| 接口权限 | /usr/bin/sysboostd权限为500 | 测试通过 |


# 5     测试执行

## 5.1   测试执行统计数据

| 版本名称 | 测试用例数 | 用例执行结果 | 发现问题单数 |
| -------- | ---------- | ------------ | ------------ |
| openEuler 22.03 LTS SP4第一轮测试（2024.11.21-2024.11.28） | 10 | 7 PASS，3 FAILED | 3 |
| openEuler 22.03 LTS SP4第二轮测试（2024.11.28-2024.12.04） | 10 | 10 PASS  | 0 |
