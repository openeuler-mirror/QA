![openEuler ico](../../images/openEuler.png)

版权所有 © 2023 openEuler社区  
您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA
4.0”)的约束。为了方便用户理解，您可以通过访问<https://creativecommons.org/licenses/by-sa/4.0/>了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA
4.0的完整协议内容您可以访问如下网址获取：<https://creativecommons.org/licenses/by-sa/4.0/legalcode>。

修订记录

| 日期       | 修订版本 | 修改  章节       | 修改描述               |
| ---------- | -------- | ---------------- | ---------------------- |
| 2024-6-28 | 1.0.0    |                  | 初稿                   |

Keywords 关键词：

openEuler LTS SP4 ppc64le 测试策略



Abstract 摘要：

本文是openEuler 22.03 LTS SP4 ppc64le 版本的整体测试策略，用于指导该版本后续测试活动的开展



缩略语清单：

| 缩略语 | 英文全名                             | 中文解释       |
| ------ | ------------------------------------ | -------------- |
| LTS    | Long time support                    | 长时间维护     |
| OS     | Operation System                     | 操作系统       |
| CVE    | Common Vulnerabilities and Exposures | 公共漏洞和暴露 |



# 1 概述

openEuler是一款开源操作系统。当前openEuler内核源于Linux，支持鲲鹏及其它多种处理器，能够充分释放计算芯片的潜能，是由全球开源贡献者构建的高效、稳定、安全的开源操作系统，适用于数据库、大数据、云计算、人工智能等应用场景。

本文主要描述openEuler 22.03 LTS SP4 ppc64le 版本的总体测试策略，按照社区开发模式进行运作，结合社区release-manager团队制定的版本计划规划相应的测试活动。

# 2 测试版本说明

openEuler 22.03 LTS SP4 是基于5.10内核22.03-LTS的增强扩展版本，面向服务器、云、边缘计算和嵌入式场景，持续提供更多新特性和功能扩展，给开发者和用户带来全新的体验，服务更多的领域和更多的用户。该版本基于openEuler 22.03 LTS-Next分支拉出，openEuler 22.03 LTS SP4 ppc64le 是 openEuler powerpc架构的第一个版本，无前期已发布版本。

## 2.1 版本测试计划

openEuler 24.03 LTS SP4 ppc64le 版本按照社区release-manager团队的计划及经社区议题讨论，计划进行1轮测试，视测试结果再决定是否进行后续轮次的测试：

| 版本名称    | 测试起始时间 | 测试结束时间 | 天数 | 备注             |
| ----------- | ------------ | ------------ | ---- | ---------------- |
| Test round1 | 2024/6/21    | 2024/6/28    | 8    | 基本测试         |
| Test round2 | 2024/7/1     | 2024/7/5     | 5    | 回归测试（待定） |

## 2.2 测试硬件信息

测试的硬件环境如下：

| 硬件型号 | 硬件配置信息 | 重点场景   |
| -------- | ------------ | ---------- |
| HX-S1221 | CPU HX-C1000 | OS集成测试 |

## 2.3 测试活动分工

本次测试主体为合芯科技



# 3 版本概要测试结论

openEuler 24.03 LTS SP4 ppc64le 版本因构建进度滞后于社区release-manager团队的计划，经社区指导，精选测试内容进行测试。

openEuler 22.03 LTS SP4 ppc64le 版本共发现问题 128个，遗留问题 126个(重要遗留问题见附件章节)。版本整体质量有风险 。



# 4 版本测试详细结论

openEuler 22.03 LTS SP4 ppc64le 版本详细测试内容包括：

1. 完成物理机安装部署测试，质量良好；虚拟化安装不成功，有较大风险；
2. 完成内核功能、标准、性能和长稳测试，有较低风险；
3. 完成基础性能测试，横向对比无显著差异；
4. 完成单包命令和服务测试，有部分Fail；
5. 完成安全测试，质量较好；
6. 专项测试包括包管理、重启专项、文件系统、网络系统和架构特性专项，质量良好；

## 4.1 安装部署测试

| 测试类型 | 测试内容                                 | 测试结论                   |
| -------- | ---------------------------------------- | -------------------------- |
| 安装部署 | 镜像物理机、虚拟机系统部署；PXE、U盘安装 | 物理机通过，虚拟机安装失败 |

## 4.2  内核测试

| 测试类型 | 测试内容                                         | 测试结论                                 |
| -------- | ------------------------------------------------ | ---------------------------------------- |
| 功能     | 采用开源测试套ltp进行内核基本功能的测试          | 有3项未通过（fallocate05, rtc02，vma05） |
| 标准     | 采用开源测试套ltp进行POSIX标准测试               | 通过                                     |
| 性能     | 采用开源测试套mmtests进行性能测试                | 通过                                     |
| 安全     | 因syzkaller测试工具未适配powerpc架构，测试未进行 |                                          |
| 长稳     | 采用开源测试套dfx_long_stress进行测试            | 通过                                     |

## 4.3 基础性能测试

| **指标大项**   | **指标小项**                                                 |
| -------------- | ------------------------------------------------------------ |
| O参考S基础性能 | 进程调度子系统，内存管理子系统、进程通信子系统、系统调用、锁性能、文件子系统、网络子系统。 |

PowerPC架构此版本是第一版，以此版本测试结果作为指标基线。

## 4.4 单包测试

| 测试类型       | 测试内容                                | 测试结论     |
| -------------- | --------------------------------------- | ------------ |
| 命令和服务测试 | 采用社区工具mugen cli进行Everything测试 | 部分测试失败 |

## 4.5 安全测试

| 测试类型     | 测试内容                                       | 测试结论 |
| ------------ | ---------------------------------------------- | -------- |
| 端口扫描     | 彩网络端口扫描工具nmap进行测试                 | 通过     |
| 安全测试     | 采用mugen/security_test进行测试                | 通过     |
| OS fuzz测试  | 因oss-fuzz工具未适配PowerPC架构，此测试未进行  |          |
| 内核fuzz测试 | 因syzkaller工具未适配PowerPC架构，此测试未进行 |          |

## 4.5 专项测试

| 测试类型 | 测试内容                                    | 测试结论 |
| -------- | ------------------------------------------- | -------- |
| 包管理   | 包安装/卸载、自编译测试                     | 通过     |
| 重启专项 | 冷重启、热重启、高压重启                    | 通过     |
| 文件系统 | 采用mugen/system-test/fs-test/进行测试      | 通过     |
| 网络系统 | 采用mugen/system-test/network-test/进行测试 | 通过     |

# 5 问题单统计



# 6 附件

## 6.1 遗留问题列表

| 序号 | 问题单号 | 问题简述                                                     | 问题级别 | 影响分析 | 规避措施 | 历史发现场景 |
| ---- | -------- | ------------------------------------------------------------ | -------- | -------- | -------- | ------------ |
| 1    |          | java-1.8.0-openjdk安装后执行java命令报错                     | 主要     |          |          |              |
| 2    |          | 虚拟机安装部署失败                                           | 主要     |          |          |              |
| 3    |          | mysql命令执行失败，报错无法通过socket连接到MySQL Server      | 主要     |          |          |              |
| 4    |          | ltrace工具无法使用，执行报错找不到文件                       | 次要     |          |          |              |
| 5    |          | haproxy服务重载报错haproxy.service reload causes the service status to change | 次要     |          |          |              |
| 6    |          | uuid -F BIN返回值无RT                                        | 次要     |          |          |              |

其余问题尚待整理