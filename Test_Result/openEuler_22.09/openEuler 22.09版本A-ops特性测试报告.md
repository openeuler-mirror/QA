![openEuler ico](../../images/openEuler.png)

版权所有 © 2022  openEuler社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录
| 日期        | 修订版本    | 修改描述                        | 作者   |
| ---------- |  --------  | ------------------------       | ------|
| 2022/09/13 |   1.0.0    | A-ops测试报告 | 王小娅/丁娇/张花蕊 |

关键词：Aops 智能定位 异常检测 故障诊断
摘要：按照测试策略，对A-ops项目下的智能定位（异常检测、故障诊断）进行接口以及web页面功能、场景以及易用性测试。



# 1   概述
a-ops主要有四大模块功能，分别为工作台管理、资产管理、智能定位、告警管理。

### 1. 工作台

   该页面为数据看板页面，用户登录后，仍在该页面。

支持操作：

- 当前纳管的主机数量
- 当前所有未确认的告警数量

- 每个主机组告警情况的统计

- 用户账户操作

   - 修改密码
   - 退出登录


### 2. 资产管理

资产管理分为对主机组进行管理以及对主机进行管理。每个主机在agent侧注册时需指定一个已存在的主机组进行注册，注册完毕后会在前端进行显示。

（1）主机组页面：


支持如下操作：

- 主机组添加
- 主机组删除
- 查看当前所有主机组
- 查看每个主机组下的主机信息

添加主机组时，需指定主机组的名称和描述。注意：请勿重复名称。


（2）主机管理页面：


支持如下操作：

- 查看主机列表（可根据主机组、管理节点进行筛选，可根据主机名称进行排序）
- 删除主机
- 点击主机可跳转到主机详情界面

（3）主机详细信息界面：

详情页的上半部分展示了该主机的操作系统及CPU等的基础信息。


详情页的下半部分，用户可以看到该主机当前运行的采集插件信息（目前agent只支持gala-gopher插件）。

支持如下操作：

- 查看主机基础信息及插件信息
- 插件的管理（gala-gopher）
  - 插件资源查看
  - 插件的开启和管理
  - gala-gopher的采集探针的开启和关闭
- 主机场景的识别


###  3. 智能定位

AOps项目的智能定位策略采用内置网络诊断应用作为模板，生成个性化工作流的策略进行检测和诊断。

“应用”作为工作流的模板,描述了检测中各步骤的串联情况，内置各步骤中使用的检测模型的推荐逻辑。用户在生成工作流时，可根据各主机的采集项、场景等信息，定制出工作流的详细信息。

（1）工作流列表页面：


支持操作：

- 查看当前工作流列表，支持按照主机组、应用和状态进行筛选，并支持分页操作
- 查看当前应用列表

（2）工作流详情页面：


支持操作：

- 查看工作流所属主机组，主机数量、状态等基础信息
- 查看单指标检测、多指标检测、集群故障诊断各步骤的详细算法模型信息
- 修改检测各步骤应用的模型
- 执行、暂停和删除工作流



（3）应用详情页面

支持操作：

- 查看应用的整体流程
- 基于应用创建工作流



###  4. 告警

启动工作流后，会根据工作流的执行周期定时触发诊断，每次诊断若结果为异常，则会作为一条告警存入数据库，同时也会反应在前端告警页面中。


- 查看当前告警总数
- 查看各主机组的告警数量
- 查看告警列表
- 告警确认
- 查看告警详情
- 下载诊断报告



# 2   特性测试说明

本节描述被测对象的版本信息和测试的时间及测试轮次区，详细的版本信息和测试时间如下表：

| 版本名称             | 测试起始时间   | 测试结束时间   |
| ------------------- | ------------ | ------------ |
| openEuler 22.09 RC1  | 2022-08-08 | 2022-08-14 |
| openEuler 22.09 RC2  | 2022-08-18 | 2022-08-25 |
| openEuler 22.09 RC3  | 2022-08-30 | 2022-09-05 |
| openEuler 22.09 RC4  | 2022-09-08 | 2022-09-14 |

描述特性测试的硬件环境信息

| 架构    | 环境   | 配置                                 | 数量 |
|:-------|:------|:-------------------------------------|:----|
| arm架构 | 虚拟机 | CPU核数：4<br>内存：8G<br>硬盘容量：50G | 2   |
| x86架构 | 虚拟机 | CPU核数：4<br>内存：8G<br>硬盘容量：50G | 2   |


# 3   测试结论概述

##  3.1 测试整体结论

工作台管理特性，共计执行120个用例，覆盖特性的接口、基本功能和web页面测试。

| 测试活动    | 活动评价                                               |
| ----------| ------------------------------------------------------ |
| 接口测试   | 接口可正常请求，响应，返回内容符合预期            |
| web测试 | 页面可用性、易用性符合预期 |
| 功能测试   | 功能测试符合预期，所有页面的基本功能正常                        |

资产管理特性，共计执行315个用例，覆盖特性的接口、基本功能和web页面测试。

| 测试活动    | 活动评价                                               |
| ----------| ------------------------------------------------------ |
| 接口测试   | 接口可正常请求，响应，返回内容符合预期            |
| web测试 | 页面可用性、易用性符合预期 |
| 功能测试   | 功能测试符合预期，所有页面的基本功能正常                        |

智能定位特性，共计执行240个用例，覆盖特性的接口、基本功能和web页面测试。

| 测试活动    | 活动评价                                               |
| ----------| ------------------------------------------------------ |
| 接口测试   | 接口可正常请求，响应，返回内容符合预期            |
| web测试 | 页面可用性、易用性符合预期 |
| 功能测试   | 功能测试符合预期，所有页面的基本功能正常                        |

告警管理特性，共计执行15个用例，覆盖特性的基本功能和web页面测试。

| 测试活动    | 活动评价                                               |
| ----------| ------------------------------------------------------ |
| web测试 | 页面可用性、易用性符合预期 |
| 功能测试   | 功能测试符合预期，所有页面的基本功能正常                        |  
    

##  3.2 约束说明

特性可靠性暂不保证，只需保证基本功能正常

### 3.3.1 遗留问题影响以及规避措施

| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| -------- | -------- | -------- | ------------------ | -------- |


### 3.3.2 问题统计

|        | 问题总数 | 严重 | 主要 | 次要 | 不重要 |
| ------ | -------- | ---- | ---- | ---- | ------ |
| 数目   |   18       |  1    | 5   |  12    |  0   |
| 百分比 |  100%     |   5%   | 28% | 67% | 0% |

问题列表：
| 问题单号 | 问题描述 | 问题级别 | 问题影响和规避措施 | 当前状态 |
| -------- | -------- | -------- | ------------------ | -------- |
I5M3W4 |	[22.09-RC1][aarch64/x86_64]Postman停止gala-gopher插件失败	|	主要| |	已验收
I5M48E |	【22.09_round1】【x86/arm】卸载gopher插件后，获取插件运行信息接口返回500	|	次要 | |	已验收
I5M9YN |【22.09_RC1】【x86/arm】aops-manager服务启动失败	|	严重	| | 已验收
I5NJ0V |	[22.09-RC2][x86/aarch][aops]首次登录，gala-gopher插件的前后台状态不一致	|	次要 | |	已完成
I5NJ3R |	[22.09-RC2][x86/aarch][aops]建议“建议开启采集项“只适用于当前未开启采集项的项目|		次要 | |	已验收
I5NJ3Z	| 【22.09_RC2】【x86/arm】aops-manager刪除主机失败，提示request parameter error	|	主要	| | 已验收
I5NLQC	| [22.09-RC2][x86/aarch][aops]删除host,表host_group的host_count字段数量不变	|	主要 | |	已验收
I5NP88	|【22.09_RC2】【x86/arm】aops-manager删除插件后，建议前端不展示插件信息		|次要| |	已验收
I5O2LX	|【22.09_RC2】【x86/arm】使用aops-tools工具部署agent，建议自动在目标机器上安装依赖软件包，如：python3-libselinux |		次要 | |	已验收
I5PJWE	|【22.09_RC3_aops】【arm】AB机器部署成功后，创建工作流指标数量不稳定，服务异常；	|	主要 | |	已完成
I5PJXL	|【22.09_RC3_aops】【arm】AB机器部署成功后，易用性问题集合1；	|	次要	| | 已完成
I5POR8	|【22.09_RC3】【x86/arm】aops 有工作流的情况下，刪除主机失败，前端提示删除成功	|	次要 | |	已验收
I5PQ2E |	[22.09-RC3][x86/aarch][aops]运行中的工作流，建议“删除 ”按钮置灰	|	次要	| | 已验收
I5PYPU	|【22.09_RC3】【x86/arm】aops 告警确认成功，提示红色叉叉，告警数量未减少	|	主要	| | 已验收
I5PYSI |	[22.09-RC3][x86/aarch][aops] 修改模型页面的“已取得模型总条数”为空，且页码显示需优化		|次要	| | 已验收
I5Q4PA	|【22.09_RC3_Aops_gala-ragdoll】配置溯源给业务域test01添加配置报错500；	|	次要 | |	已完成
I5R19L	| [22.09-RC4][x86/aarch][aops]无内置应用时,主机管理列表中“场景”字段的值有歧义	|	次要 | |	待办的
I5R9RG	|【22.09_RC4】【x86/arm】aops 有工作流的情况下，刪除主机失败，提示信息需要优化，明确失败原因	|	次要 | |	待办的


# 4   测试执行

##  4.1 测试执行统计数据

*本节内容根据测试用例及实际执行情况进行特性整体测试的统计，可根据第二章的测试轮次分开进行统计说明。*

| 版本名称             | 测试用例数  | 用例执行结果 | 发现问题单数 |
| ------------------- | --------- | ---------- | ---------- |
| openEuler 22.09 RC1 | 120        | succeed     | 3         |
| openEuler 22.09 RC2 | 315        | succeed     | 6         |
| openEuler 22.09 RC3 | 240      | succeed     | 7         |
| openEuler 22.09 RC4 | 15        | succeed     | 2         |

*数据项说明：*

*测试用例数－－到本测试活动结束时，所有可用测试用例数；*

*发现问题单数－－本测试活动总共发现的问题单数。由于前三轮都包含增量特性，第四轮为全量特性。所以各个轮次问题单数量没有相关性。*

## 4.2   后续测试建议

后续测试需要关注点(可选)


# 5     附件

*此处可粘贴各类专项测试数据或报告*

