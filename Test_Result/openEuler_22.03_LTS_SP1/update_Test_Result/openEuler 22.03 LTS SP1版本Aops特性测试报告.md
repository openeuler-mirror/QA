![openEuler ico](../../images/openEuler.png)

版权所有 © 2023  openEuler社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问[*https://creativecommons.org/licenses/by-sa/4.0/*](https://creativecommons.org/licenses/by-sa/4.0/) 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：[*https://creativecommons.org/licenses/by-sa/4.0/legalcode*](https://creativecommons.org/licenses/by-sa/4.0/legalcode)。

修订记录
| 日期        | 修订版本    | 修改描述                        | 作者   |
| ---------- |  --------  | ------------------------       | ------|
| 2023/5/18 |   1.0.0    | A-ops测试报告 | 丁娇/周前程 |

关键词：Aops 漏洞管理 资产管理 热补丁修复 一键部署
摘要：openEuler 22.03-LTS-SP1 0423update版本增加热补丁修复，一键部署等需求，按照测试策略，对A-ops项目下的漏洞管理、资产管理、一键部署等功能进行接口、web页面功能、场景、文档以及易用性测试。

# 1  A-Ops 0423update版本新增功能

## 1.1 用户管理
之前版本只支持默认账户登录，本次版本增加用户登录方式：
- 支持用户注册：支持用户的注册，由用户名，密码，确认密码，邮箱四项组成，注册成功后跳转登录页面
- 支持第三方鉴权登录：登录界面点击第三方登录进入选择gitee账户授权界面，未绑定用户首次鉴权后需要绑定A-Ops本地账号，若本地账户不存在则可以快捷跳转注册页面；非首次鉴权登录后等待几秒后进入dashboard界面
- 支持用户修改密码：用户登录后点击工作台右上方头像按钮后可以修改用户密码。
## 1.2 主机管理
- 支持前端添加主机（添加单个主机、批量添加）
- 支持用户编辑主机信息
## 1.3 漏洞管理
- 修复漏洞时支持冷/热补丁两种方式修复
- 支持主机定时扫描
- 支持扫描后通过邮箱发送漏洞报告给用户
- 支持安全公告定时下载
## 1.4 部署能力增强，支持一键部署
## 1.5 token校验功能完善
## 1.6 web界面新增token刷新功能
## 1.7 客户端与服务端交互方式改为ssh


# 2 涉及到的接口变更
- /manage/host/add
- /manage/host/add/batch
- /manage/host/update
- /manage/host/file/template
- /manage/account/add
- /manage/account/login
- /manage/account/authredirecturl
- /manage/account/gitee/login
- /manage/account/bindaccount
- /manage/account/change
- /manage/account/refreshtoken
- /manage/vulnerability/cve/fix
- /vulnerability/cve/info/export
- /vulnerability/cve/host/get
- /vulnerability/cve/task/host/get
- /vulnerability/host/cve/get
- /vulnerability/task/cve/generate
- /vulnerability/task/callback/cve/scan

# 3 特性测试说明
本节描述被测对象的版本信息和测试的时间及测试轮次区，详细的版本信息和测试时间如下表：
|版本名称                                |测试起始时间 |测试结束时间|
|-------------------------------------- |-----------|--------|
|openEuler-22.03-LTS-SP1 0423 update RC1	|2023-4-23	|2023-4-28
|openEuler-22.03-LTS-SP1 0423 update RC2	|2023-5-4	|2023-5-6
|openEuler-22.03-LTS-SP1 0423 update RC3	|2023-5-10	|2023-5-15

# 4 测试结论概述
## 4.1 测试整体结论
三轮测试共执行320个用例，覆盖特性的接口、web测试和兼容性测试。

|测试活动	|活动评价|
| ----------| ------------------------------------------------------ |
|接口测试	|完成全部API测试，接口可正常请求，响应，返回内容符合预期|
|web测试	|功能测试符合预期，页面功能正常；页面可用性、易用性符合预期|
|兼容性测试	|所有aops源码包在22.03-S-LTS-SP1版本上均可编译成功，rpm包可正常安装，升降级正常，没有对其他组件的依赖和影响|

## 4.2 约束说明
描述特性测试的硬件环境信息

|架构	|环境	|配置	|数量|
| ------| -----|------|------|
|arm架构	|虚拟机	|内存：8G	|2|
|x86架构	|虚拟机	|内存：8G	|2|

## 4.3 问题分析

### 4.3.1 遗留问题影响以及规避措施

|问题单号	|问题描述	|问题级别	|问题影响和规避措施	|当前状态|
| -------- | --------|----------|----------------|-------------- |
|I732RB	|长时间不操作前端界面，右上角的"admin"显示一直加载	|次要 |清缓存重新进入  |待办|

### 4.3.2 问题统计

|总数 |RC1	|RC2 |RC3 |问题 |待办|取消 |严重|主要 |次要|
| ---| ----|----|----|----|----|----|----|----|----|
|32	 |20   |10	|2	 |30  |1   |1	|2	 |20  |10  |

数据项说明：

问题单数－－共提交31个有效问题单，其中缺陷为28个，优化为3个；缺陷类问题单均已解决,1个优化项待解决

问题单趋势－－RC1为全量验证，RC2为重点用例验证和问题单回归，RC3主要进行遗留问题单回归和核心功能验证，因此问题单数呈递减状态；


# 5 测试执行
## 5.1 测试执行统计数据


| 版本名称             | 测试用例数  | 发现问题单数 |
| ------------------- | --------- | ---------- |
| openEuler-22.03-LTS-SP1 0423 update RC1 | 170    | 20 |
| openEuler-22.03-LTS-SP1 0423 update RC2  | 120    | 12 | 
| openEuler-22.03-LTS-SP1 0423 update RC3 |30	    |2 |

数据项说明：

测试用例数－－到本测试活动结束时，所有可用测试用例数。第1轮为全量测试，第2轮为重点用例执行和issue回归，第3轮主要进行问题单回归和核心功能验证，因此测试用例数呈递减状态;

发现问题单数－－本测试活动总共发现的问题单数。由于第一轮所有需求均已转测，所以问题单数量呈递减状态。第3轮提交的2个问题，一个因为前端无法使用，开发同事修复后重新打包已验证，一个属于前端次要问题，提供了规避方案，下个迭代解决。

## 5.2 后续测试建议

- 关注可靠性、安全性方面的测试点


# 6 附件

*此处可粘贴各类专项测试数据或报告*
