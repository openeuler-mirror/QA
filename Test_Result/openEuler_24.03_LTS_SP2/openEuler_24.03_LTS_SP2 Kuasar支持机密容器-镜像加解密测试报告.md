![avatar](../../images/openEuler.png)


版权所有 © 2025  openEuler社区
 您对“本文档”的复制、使用、修改及分发受知识共享(Creative Commons)署名—相同方式共享4.0国际公共许可协议(以下简称“CC BY-SA 4.0”)的约束。为了方便用户理解，您可以通过访问https://creativecommons.org/licenses/by-sa/4.0/ 了解CC BY-SA 4.0的概要 (但不是替代)。CC BY-SA 4.0的完整协议内容您可以访问如下网址获取：https://creativecommons.org/licenses/by-sa/4.0/legalcode。

修订记录

| 日期 | 修订   版本 | 修改描述 | 作者 |
| ---- | ----------- | -------- | ---- |
|  2025-6-16|   v1.0 | Kuasar支持机密容器-镜像加解密测试报告|  薛文珍 |

关键词：机密容器 

摘要：机密容器提供了一组安全相关的特性和功能，用于保护标准容器的工作负载，使容器中的数据安全性、隐私性及完整性得到更高级别的保护，解决了云原生场景下云厂商信任依赖的问题，达成了用户数据可用但不可见的使用需求。


缩略语清单：

| 缩略语 | 英文全名 | 中文解释 |
| ------ | -------- | -------- |
|        |          |          |

# 1     特性概述

Kuasar当前采用的是基于virtCCA架构的VM-based的方案，整体与kata containers比较类似。利用QEMU的能力将机密虚机运行于信任域，确保整个虚机的数据安全，进而确保虚机中的容器的数据安全。本特性Kuasar-task与远程证明代理进程进行交互，支持对远程拉取的镜像镜像解密后创建容器。该测试报告对镜像解密，创建容器的功能进行测试，并执行继承用例覆盖机密容器的基本功能测试。

# 2     特性测试信息

本节描述被测对象的版本信息和测试的时间及测试轮次，包括依赖的硬件。

| 版本名称 | 测试起始时间 | 测试结束时间 |
| -------- | ------------ | ------------ |
| rc4_openeuler-2025-05-15-17-42-16 | 2025/5/15|2025/5/22     |
| rc5_openeuler-2025-05-23-20-04-52 | 2025/5/23|    2025/5/29  |
| rc6_openeuler-2025-05-30-16-01-07 |  2025/5/30 |  2025/6/5 |
描述特性测试的硬件环境信息

| 硬件型号 | 硬件配置信息 | 备注 |
| -------- | ------------ | ---- |
|  VirtCCA        |    |  物理机（ARM架构）   |

# 3     测试结论概述

## 3.1   测试整体结论

Kuasar支持机密容器-镜像加解密特性，共计执行6个用例，主要覆盖了拉取加密镜像-解密-创建容器功能测试，执行5个继承用例覆盖机器容器的基本功能进行测试，包括生命周期，服务稳定性，并发测试等功能场景进行测试。
经测试未发现问题，无遗留风险，整体质量良好。

| 测试活动 | 测试子项 | 活动评价 |
| ------- | -------- | ------- |
| 新增功能测试 | 拉取加密镜像并解密 | 发现问题已解决，回归通过，无遗留风险
| 功能测试 | 继承用例执行 |未发现问题，无遗留风险 |
| DFX专项测试 | 可靠性(继承用例执行) |未发现问题，无遗留风险 |
|资料测试 | 特性资料说明 |未发现问题，无遗留风险 |  

## 3.2   约束说明

物理硬件环境。

## 3.3   遗留问题分析

### 3.3.1 遗留问题影响以及规避措施

不涉及遗留问题

### 3.3.2 问题统计

不涉及

# 4 详细测试结论

## 4.1 功能测试
（1）使用加密工具对镜像加密后上传到远端镜像源，加密信息进行base64编码后生成秘钥，托管在远程证明服务端；托管的秘钥与加密镜像匹配，镜像拉取后正常解密，功能正常；
（2）远程证明服务端托管的秘钥被篡改（路径\名称\内容修改、秘钥被删除），拉取加密镜像后解密失败；
（3）使用解密后的镜像创建容器，功能正常。

## 4.2 可靠性测试结论

继承用例覆盖，并发创建容器，功能正常。

## 4.3 资料测试结论
| 测试类型 | 测试内容 | 测试结论 |
| ------- | ------- | -------- |
|    资料测试     |   PR：https://gitee.com/openeuler/docs-centralized/pulls/15238 检视意见均已闭环，新增特性及使用方法描述准确，无遗留问题。     |通过  |
# 5     测试执行

## 5.1   测试执行统计数据

*本节内容根据测试用例及实际执行情况进行特性整体测试的统计，可根据第二章的测试轮次分开进行统计说明。*

| 版本名称 | 测试用例数 | 用例执行结果 | 发现问题单数 |
| -------- | ---------- | ------------ | ------------ |
| rc4_openeuler-2025-05-15-17-42-16 |6|  成功6个，失败0个  |  0|
| rc5_openeuler-2025-05-23-20-04-52 |6|  成功6个，失败0个|  0|
| rc6_openeuler-2025-05-30-16-01-07 |6 | 成功6个，失败0个  |  0| 

